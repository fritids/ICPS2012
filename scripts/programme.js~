var types = {
    _GENERAL: 0,
    _FOOD: 1,
    _GLECTURE: 2,
    _SLECTURE: 3,
    _BREAK: 4,
    _EXTERNAL: 5,
    _PARTY: 6
 };

function b(start, title, sub, type) {
  return {"start": start, "title": title, "sub": sub, "type": type};
}

var schedule = [
  [
      b(8, "", "", 99),
    b(14.5, "Arrival", "", types._GENERAL),
    b(18.5, "Dinner", "Buffet", types._FOOD),
    b(20.5, "Break", "", types._BREAK),
    b(21, "Party", "Welcome Party", types._PARTY)
  ]
];

function fit(start) {
  return (start - 8) / 14;
}

$(function() {
  var timetable = $('#programme-timetable');
  
    $.each(schedule, function(s_index, day) {

      $.each(day.slice(0, day.length - 1), function(index, el) {
      var start_fit = fit(el.start);
    
      var next_fit = fit(day[index + 1].start);

      var height = Math.floor((next_fit - start_fit) * timetable.height());
	  console.log(height);
	  $('<div>'+el.title+'</div>').addClass('timeslot').css('height', height+'px').appendTo('#programme-timetable > div:nth-of-type('+s_index+2 +')');
      });
    })
});
